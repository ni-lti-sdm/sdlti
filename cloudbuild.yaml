steps:  
# Building image
# Note: You need a shell to resolve environment variables with $$
- name: 'gcr.io/cloud-builders/docker'
  entrypoint: 'bash'
  args: [ 
          '-c',
          "docker build -f Dockerfile --build-arg SSH_KEY=$$SSH_KEY ." 
        ]
  secretEnv: ['SSH_KEY']

secrets:
- kmsKeyName: projects/data-warehouse-project-235018/locations/global/keyRings/lti-keyring/cryptoKeys/github-key
  secretEnv:
    SSH_KEY: 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