steps:  
# Building image
# Note: You need a shell to resolve environment variables with $$
- name: 'gcr.io/cloud-builders/docker'
  entrypoint: 'bash'
  args: [ 
          '-c',
          "docker build -f Dockerfile --build-arg SSH_KEY=$$SSH_KEY ." 
        ]
  secretEnv: ['SSH_KEY']

secrets:
- kmsKeyName: projects/data-warehouse-project-235018/locations/global/keyRings/lti-keyring/cryptoKeys/github-key
  secretEnv:
    SSH_KEY: CiQACbDsxo+FbYTN2K26W/8ZO1LNjc+QgHeKLFMIJdTjHBEPSaoS5xoATpZ8/9ey0ly6/GQ4En8u6poYUJKs/ikNZvhR8qJtD+hbm9mzA70mcsvZrsFUxqzbyFKME+w7ub/PB0SyIqnQAT1D8yzI9jRMr2N+/ex6XMy1obVFxlhM6T4Zv/pMGIkysq+ozHwYpSjtPfUrsp/gm0mWORJarPrtFDyNGHRfY7piHDPW7jTbj6rPicxC60t0J7ApkUvKRPLLf/tGKvnaXd01DwLQYaqQGk/9Ikh1ZETHNR0tbavEK+2nlODECpPFbWKtYkdtfw+Az2iCpcgpa/uK8accH0VV/FOtuTgK0r7Uv2HzzE82r/QglubU6NX2jTAo6Yz/ZBpgmtr3KKFl1u0tOIcWjd8aKWRUiT1+uyETKHUxtbOsKfj5sjmuttyuSmwRVUB76Atp+GUC0ZapgG8TBnKEbGalMQEjEpcHxhvzMJpGi0K8yB+q58TBbeL0n/8fmjUdKpIIy/2qHM0hBbCwKQ11CvS4ammrok5SEFc0csAFLDejl6NR1My1rdweJLfszEZX7Q1GecCqqgF2PYH5jMCH0tChIAv7xnDNbGcINnEfhcmGPx0FDOvgqpyFAkPr8XFCiiGVC1Uf3+lyeUgV16LGojTvtGWT6mzpt261iy+XxF+q3PkU09DICzipSSnBWeu1ZnoLwBTzmDvlCRqmznvAN6RHVnQCE3v0U+uT9tzw34dgmgmGAdxruJujE6pTw3xEwJy5IH/qGfSqda/ZPis98gkpi/eYHxKMCqIeMmiV02DF6awGGFNLdhQhx+hTN+BedDK5bXeRnzSFE0uU2EU91yzloJbDg0ZGpl17VzjVdMZ5rmrcOXmRmumRNX5GX03Rx9ccM9zPNvqO2BxxR95UD7Q11w2d3WmOwkBghYJdgIL+83LIdsvimlSmaP3dtdhUuyLU6p1waTnlK8aBvN+/kZw6fkIUTolJ3vuKp/nnzNjgH/N4KocCbpWAey7FtAi9cbikcM5QwBXwxsLQkZIlzXC5epvgtWvwX2jU3JrOhEo0KiA9fBmHMBlmplCwOrAWEngAAxzTyK7krCTT340tSvwAVsosnJ0ivVa6Pt4qeThp61UDcZwmW9LBtWlp9MZOfUtaoZaiAdtfQmwl2MlJbId6bsY77QnBcN6XpoJ3GObSgapR2eYEL5dVVuUOjeMXlXobsjI3uEWU5qFPyZlm5uDaL/wUJrU3b5NUFxnDFEG2+wZn6ZlPJ/42esVg8Vcd4EhHFTS8u0wxxWzo3haI5PsiR1vRuSrqGFKLxolk+UJxijACx5x6JF7K9izoxp8DzM76VVOosOvbsoFyteVko7zMbCiVoYPrgfKs5TmGDFhT9h+CCCPFXa9hwMc+G/WdYERnJV3uO4qJ+Zsd1tlwNL0q630on/oHS1ZWmW/tsk4PMJYgslsP+dChiVGHjPj63MUsuet1/YxTLB6TPmWwCU5UsxFmSQ4WP4HF51CUKydw1ib4dWMdDmpYx2xHaFLftQ60kEr8h18jBQ+kXj+SRNulbYePNfyVdigoSLenG35CHpZaujRjsikOHcz9qESsmPAdPXGGqEr2APZhufussIUEpomN6mI548Lqv5EM75XtamsGrXfST/fRbpOPhiocuvsqUEHMB17eLbXHCZGvOOII3HGfWsPSrdn4SlGwxnVh7GO38IO219b6bGoGJUy/S8nbFphYgSqgP0wldIvr3rU8Pw5ed202P0iCyYWg0P1MKaKaiL0XPvcFvtwwjziQNLO8+LoKCBVa7t8yDyRBHJr2yyB9DkLYIhYi4pZ7O/jCNp8KEFkCanPzMFg9QfjlTtRU3bBoPAw2UkM0IBuPYPKr24KAlMVCgyPJOkDXgvthszeVZgjjqqrBmPogdwN/dEkzuFi0RGX4b3DpphhGdaV8c5Vvp/Psq9XFkYFRMKC6EPP/hy18vxr66zS76QqsRgiaQnmyxTZxmQ5WBqKSVIl//04V4DO4s5F8DSfVHSBP/lWG3uKWleOfHXD4LR1TyRfQZxU15xZySctIgTVvP7If3VbOzYURUwk6eibnZJuhpIPZV9sfasyqtX29kRTXsMiRFNSJQu9OC3mBVu1j6ndCYTjE6O/h6wng9718+tiGy8kjFdSKlSpLsHokcA46FI4R+haF6chqX/d2rh4f2khDMBeClHyjPTnbQwa8FFUWXOw8LMnDZgxdrx9dR2a6aUxGtIOeI4f+XM7iC1Z0Us2GsxknonG10tzStDr9uy15DADB3W9tvRZNehvkVQFTrnhCFkG9SrQQJvmWfjTTAbpDsFX6Hmrg7w7qIb3nAs90fCjza+uVX4TAjZeBnunlrCSeoJP7c1JQrOIEFPBjiTfbexqAEgz0xesBbux7VL1JdlNUb4ZtEANvyZHGiAOGQDtYr82jeIF5mswqQSrkDb2UHDxVRpYlQrPnuk4GUUPs3hPf3W8sOVx/QGMVQcGewvUyGpKAQly/p0znmwM/PUe4im/mVjxvnEjjBdwetjlC1zFHAbJrbHW//AUI4mXHFRReqp+dGt2QWxoyXLnlQFKM9QFqw18ARiYMwWy8vVzhk73t11KODrLYKjukOv9/JwLGPQkVjFOyxyjZ3xykskq0a3phIfmu7UvEno22t9z/jBicIhl+AVHByiVa8FMF8GCW4PpxH/M9+dwrP8XiDkW3VQ5yy/OnyeyB5YheE07lNTG7h9scMB4NjNgAf394axGDR1pS1jsu969FQUJKPqRgatWpj6h48sd60oePf/mVs748Umim50Jfs+dv+fZ5YXPTaU4uxEVgY3gU42C5Hx5FviQdZuO8h1qvUCffQsmuBNux6lhMYGO6CWJzrI0BB6IZBhffZFh1RBAF6b9BRi9JOSPG5dNc/E3O5O+K24NF2oyt5hxvgM98r0Wayb2T788fi3ra3KkBY8Ha3og4i5EzOtSMJ38j+pwlGxe7i7YAFe3mgVSiVKZTN7OkdCQcaRco5aWbyk347rryS7RzRLRA9PQjMnliX3qkRzeVCCK+pMOo7nUsbY5xCLkWNo1L6vcbszZUsO86iooY2OUwMn9LiZGV/US1Z4c5mex9ofay144ormE+wHffo5K7Lrzi8TAdOexMeHPpJx54w2KQavUBd0A0xz+FT9IQLNCcGXmapzJ1fp4RXmWDOzDNaFQThQdClkP/rh8Myt7gvmJiXJPkpotS/NEkdzlMprwplETCksNKum8PZt+ADWL8Ujdj4INtqLLs7XQeICPRDNtYjPPvfcje+5dhgNROIAv1k2E08ImQ/Oa6o7wdTOE7/ODSlOp+g+CXyUnyPXoHp90/3S4zC4gK6dbW8DQFUdk/tfIgpiQw+ZUMykEBkSQR1uhWQ/6SjdoXQFjgrV/j1Cmej5IMsK3ENgKq4AHmsw7TDlLxSTFfPaipzmR2WF182N324S2Kn/XduQrKWdMZoDeirKOSsj56EhDC+/bVUQySnNgpJ0gsFbby88X2mVkbt5poG5lDIwknm5UrWTogTA4oEa0YqtAK7t/pOy98lFFb5JFzElRdWJwOprFTPBTI8UkJd2h9eBNa0lMSxS59do1bcf6SWXrIX3fPunOQu22x5jTO2zZJAX0MD2CDZhXPKpv0SBmiFiKu1SYs9iKb5/UDhH6MnFe8re2zV+/NWcLg8fy/vJGDK5F7KW3OrVx+t/FtlvaaeGj3HIMCF+na5dirDAQbMajYvpXb6L2d0xvaWnSmFjP8RaMB1C83LjCLiWPLi2132kCewzqpi6kyTkXGINGK7Ayf3GVxnfNgc846cJ0SeVASLII8JjTKtP11n+AHeFIpk++T5prW5ix/SBZ2b1h1lE+B6eMyMaAPWEMx5XtckAJ1hw6z2ere1TjGeIFd06IJzgtfTFOji9PniVsRe+bTuF6M5knC5pOmY4+4n/tLzNbovJfxJjNZi0BbnmOjx6745hiayW0dFyrO9J2TMpSb1wXUFh1L7OGxQWV4Qhsvw9jekDGvA+9JSkiRqwl5eSwRDg+KzQ8bZsaIbYBxPD/ZeDBv/Sivyeu5yMpBUjcK6XJHsawDWJyAI7BcNQdjBqlwJWE96rKyQm04ShAXPprkabibs2YJId4g/2XjAqQetNu7I+s6QFIUJ3yVZa7OKqEfvGKEWNtGj3bdAyrIywdxNiACpL/kmCtMlZ/DuG74keLyp5CbsVhOC4uv993MMH28Ivj7iJDCiLiZsOSwombJNlenwUeK/YAgUJtUN2xuogVTKxDewzRKVxe32DniTxVdB5toDUJDyqJX6MYdmJawDJjmnmYaZrKahfaZLQwg9r86W7Nia0qlnuFXMO8Q4bHMTkFYuGKk9O1gonBdYak4veYgB9x6B7/T29aU2i0QPrFu5Cu0FF+7BUTiQ/pPDJ566SXUJzXf46YrlcUOZ3OCjZ3wUK9OSCGrJB6sQykR3lG5S1mgeG/Qw892N005TClkhpSrntfceDjB4JrYUTBZl9ERenAKiqImPZN/sRVtCkK1HGErJ1+r4ka6qW/BX9F9KzOzbacAHT9VxIeb/5dfBYf1hOTkR2X2k/MIRpApP0gbgsnS1EDIwEaeEiZy4htNaw/kQQ27Z2sSUwI5Uw==