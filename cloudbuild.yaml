steps:  
# Building image
# Note: You need a shell to resolve environment variables with $$
- name: 'gcr.io/cloud-builders/docker'
  entrypoint: 'bash'
  args: [ 
          '-c',
          "docker build -f Dockerfile --build-arg SSH_KEY_B64='$$SSH_KEY_B64' ." 
        ]
  secretEnv: ['SSH_KEY_B64']

secrets:
- kmsKeyName: projects/data-warehouse-project-235018/locations/global/keyRings/lti-keyring/cryptoKeys/github-key
  secretEnv:
    SSH_KEY_B64: CiQACbDsxjjcUFRpw/GvPue/fHXIfnyv8aKX9mnAIa3Cz6azjqoS0yMATpZ8/+dSpq2yUEHyVFa+VfuNdtM/2pRamPIig+m0CFVD5/UA8HvnIt/lXxZ70GDVCBQagr0uICXv+srqCtfPx3igrzFyguUJjeZV0We0tZpvg/5oh9xCWQ4VLZ65hs5icrdzk/kJUeQOwuKGIHH5R0aQcxWaAFfJVCoQBfQn/P5IceEImDSRIaAR6v4KlH119lmgylM//BUJFYzwr3m8QKVywXx7u8sR48WGZJWMN9Ur8Bt4Ca7GMmgOUmUPAaXMqm9A5uoieLCcIOaEf+C/HkQxhRzMIc9pLqtD51Ff1OIKY3gqwYod5G/ROsmF0kHYOr351nlzTH0xb1ncCztS0VaXU2IuknOaSQO+KxcM9GiQCtv6gm4RKA0IoAw0/MpQTtRf2GQj7bkc+0c9ssB42yyOLHDkAQf2yuzo1OndeFZMa8scI5FSnoZmaW+2eAlg6v3V/4wC+ui49WPZPtCVs/MZcWGQLLlrfXNKHYE2wjWet50lAWFFh0FMJ7PaX5BIZJfY+PeMQ6s3vXZ54PxRcAmD7B9VcUqCFLUN4nazVkzDF+NewRKrwM4OJh/6vjoteMw9SnCQOJ+1PzgYhDNtAb6FCKotm7OyrHd5RA9em9esiFje3Wm7lpZCaW5NJU1Chf1l3rWa152yDSYwFavZOFCDGWQQ0LJg60f6+zXe+RPyPYSA5CGBEDWom45cufWjdVpwTZc0OmTIN8oQLE1FhGWU+NsnPfI5fSPtqm83b/EOOMgqomaI4z/UDaCxqDRL5v/mE1/umoix/A3YIKPCLlbOUCH2e+tU1Bl/hw57aPTs5stEePPAfzDENkexMgoSr2TFkqeh2cqC7r1VtMmiOPDGINkdm5ehQrl14FlR4WlR+2V3VyVCiy4SYjAJtn+0wwl4hFd6LivdktZDvu9YEChLJ/4P6zcqIwku2JgdxNKccy95LoMRHt6bRSYT91qg+qRw6w+5elbqIBs+J6L7b1MDuNCEpqnlUjisQ5tB1LpWDHEvihjM1AV0p0YLctEBVBTa+KdpwsxJYZ2So5zyZLuINO+gQGvCd+126I0lsYsQNYnEX12o7larQLnlxXYy2w92irDKEyebEn4ny3J/rbnXXAX/igElVBr56RknJTHUkcBxWZpLBP1frd64VzEnckrl/mqO8TWKr1JtayTeWyS0Pj/ddbvKOhhS9aqcbgqmeZwIdgxffxfLDoc/X8AUB2LxUgWfQcHhqJoryUiAnmYXYSDUAjF0RBf0jPLH/GYl1y5Jp2DwLDpeAsuyES6Nl0IHKuJN77HcQHg9TANq3YmECySJCPYPMtMDVTA/U23BpXV/CthFRDrZPLgV9VG/4YkpGSTmirstPjbH9Zp/qV5Fo/wy/pu8aI9bX94i01iITjKNRh3XF51guoIXXI+yupHNLKrPlJxsjmkoS7Zpy+hzDUtQvCwv4Z9+hA8rh56eqAOQkyTzdjE70ZssWs9jPK1aBlzQ7SfniwJ4eXGwfPvsIBnVc9tIvlxKDB6kXhRXpgL8XEkiKNgNEPw75FMObvwmsN9x+LWxLpBc5y4YorZBz0KdeiqAkgYAF1SHxJXRQFESkjnpzEf/CHw4HHHTKV3LY0ryes0Z92nOP1qG9xFse2AOHMPK20I6IyU+HbpIFFtOYAOgPFvfIKkP49Sd7XZZCTB7HpuNxJk/jUCmuYs5pEtA+/GCgAYSPQUqHcal2R2uIR4dxY51BHAPpF9hZAwCxavgaM1uZNcaCE0IKOcf12/BQuOJlwNKpelC90Bu+A0l5OD0S31h7KR70dw41zdmVhd+q74m5lMljmFzQkkn4JMf3k0pebG3HfcWvqT6Axu+ewOse4akRH4btoNAWBQjr+Hx6OAfgDZZ9vyxLQiL3JQpnjESFEpqzp/F9pnr6docXtfCwdJyQ3VuszQYqrQ4HLRI+kxfZk54cXASp3SAJLZ+s/0mw1pa+hlm8PZcDO6tsozdq6F5k5N1DEnRtTXrHkIy+YnWNbvui8VRqmpSM7awmxQ33FDhRhuqZBN7rN0v7l8UGFJFioNRltDuqzWtPvBxUht9viyr8y3BjiPBlHgLWA72idqflxGa/m/pvlWe1DSXlbCT+P/J/vFay8QKkQBb/Mj5pYNu1LrylgvdG4e3VbpmXJfksh1wxYBaL7kVOpd2QaMPfFf1Ulsj0371+h0UwxOOF+IHMAcF6dLMOPJght+3imV+fF1qzjf+8F1jwGcku4ByDENPG57F9Xr1WvPCGe/ET2b8tchNHcmbanbcZ8iGvcOWR2k53uuqRPIvgnbohCCKNHZtY38HfAw6Ba18lEXOcUgupa1ZN5ry/utFMnPyRnT1/GM0OhkkJ48xzjXVR55ViQBNIww8EnL6b8+Vn4N+6cnEh38RRej7ORxZ2IgJOFgtM6yL63abFv3WhOHiGxVT3f0J7XtRSdZB8npcd/avPyF/l+y35+HMTFQLu9OqGCx18cQtbixCDTAqCu1Mwk8eb48+xi2CPK70mA9aZSECsB0BGW8QtawRl3nnU0IWHCeQi8n1GjdkdUxJlUi6jKx4Ir/dS/pZjqIdDbJvNik6jx301AN0PN8q60q+v32joxL9My7ZulN2tx88roGbykarrub4yFsZ+olUxLyebhIxU/7NxtwJK6yhpFcOf421jPD0aGwPzmcThylYvWt78sdLBNQQ2ryxG8Fyg+huXzI5rCDN4cIkwAx14ZDFI+btKfIxdJd/xpsE7GtC4d6Y3ql9YGR0LgqQzuVsoe8fHAl24Crr2wXiVa6lqex4hscSeo+YyszEd6EeBDl9maCP7304raBdzbRsYClVTC7Jrc3GQ++OZk/QrYCngsjPpo4gjJ6+o+cXJ+Vvoa/F3RDcdlthuZWv1cpaAccd6jQGat5O7wurhOUpqEqQQNu5zvpWR8+ldkl4DedOlrWY+Sl3D7CghrocuMDalTBZdUp9reFStGK8VzNHlzEoGij02F1gElDqrvFeMWc1LsGw1zLdin2nEx/AsEPzt9DbOua17Vgr71MEpBoXR3IfFBrVMFEMvK9yyo1EIcyNhUcMnW3ZvGrV73ilDDR8vqSnBwfUbdZNpw/zlJOMT7kDZqN7qdKnrhZSYXuPyOvZLSJmqw13kLZ1Q/4x+NGq5rDXP7LePkqFv450YaadtetV0JHoFf3UGMbJir0SBjCRCqv21c80RW5GkIfdmPzj9DsZct8R9wjVU56GQ2woSlTKM25ZwFBDmmYQgMyKnohxVl33Vd0bhLPnYE3hFL5oCjtA0tbLWcoMKgbtNYooiXGEd5dA7S7Nusp6+hNMD7GK07hris+C20aZmgyks87oQNMtskoJtt8Aui2KP7sE467UcLoaI8wZxzAFBtivQDICmwFK6n5P/j2aEEvxGevV4cAQ1sooGKwX+ov6GZpRPS3WNO4QgRcaxZs/P1KciBBcHh+GQftiXSYo27K84tAokmQZB2r9rRgBy1nwu5kRYpXoiqIOr86c4hbWCDKXWssD8BEWIAroU5KkHoZC/4UP4s7HmN4Bo1ZnMj/bqqmp1S8Z8Rk1n7gva0/x6rLWDzJsEqda0IWqi5zb23rM9E1wyhfUSg/1uGj/SH1JQyfF4ll5EeJrLbhQd3UmZ6gNnqTt+EHw2q+JCGmq6xCM2Uc6BElzx1rwuNJFsPWhZLnG7u7D69dFTa76wJjNHNoxnlHnBCtKTR1cfOAZLptM606urAOLQ2iFOOULtkxsAGtSxEIFBCQtPIX73obLDrcbokO2suWxkol3VDQiZWwGd+S35rii898sWqrXihY5h/+6zEQ849V/DlQMSe3AATNF2TgRbOlix9cBJz3FNHSzACsdmSkTkJrRn+0++cn7Gv+u3LiP9ZLDlbU0sgt9kMmx3PYeP1CbQ5anc38Nsk+WwzXeoz7gS7htYm908wZBHay4Osh1RkaIhDQoJOrvnRFhTFd+5JswZzSEvsOAFD6yV0dia24GwVvceZx9OTKZ/QDEhqkegIQXbVK+I0P92V56Xeu2acVXahcLkOwr9NcuPNdAq12NLA0cZ1Ucfz1qZnn9XPSHKq5JXjaJV5MLSLomj3VfuvHBZ5ORRqnEoQk5neA1QUS96W/2eDWQBmXReENLf+7p6lv/N1dyM+imRbKi4IzRpJDhlUuTXa6V12K9lNc+1wNFNLgORsWL+CaQxUOjqJYTDvOCu9JID8Z439q3KT1EtIcmK9JyFnVolaJW5wpKu7YA09iSoPNzBbmvQPiEllm+HAI4cqtTJgspli8EFYTexjO6wxP0NEzlnsBG3fbqMqzxs5xxHXZQ7XfhPokvnd+oEAl4AFe2UQ69HbsSim9GH8drkhNKI+FDpTmT1ANqbgNdT7Snj95JNvaPNw2LaMT/DgJ2fHS6Dg/ohIC3DaWNwzFVcjX3DoZJXc26pPn3sh0lm5cHv//WSmGft5Vs/YY7qhn7nvcEURBAEkuGQcih5qACKVWi6HW29zGtr2OT6B4aHp/+cf0wbwknIb3Vq3vpa8KD0cKxWyDH6Iqe7djcfV2vGANMXNrUSdhhBhfOGeerkO0zhl/vnpqejr4Po0MWWVEmoeIKt49eduPUyrZnJ9imBYvF+IioASvuL2pQ0EKrnPKaUM9yPcfbkBWwDB42l2x15qfmTxMn0o2l3qkkfTgHhtGGK27q0j3bWCWd3xuZFkIuTk11LZdjAR/o30jzdggB7Yp4T3uBZNl5jjCbki2bVEceFgGBuy7Qg4g/1d2ZkXT1JOTeSr/nRknNbvBDAU73/oQ84Hb5BMC4QLhulJU5TK2FBjcBz188vSS3HphQuwcvg2CMH3ANeM3HT9jc5ZlodfaJvJwTQvkhraUXLX5TBmfTf2lyu5uJfdKe81v6menC0Cc8cJ3hDJ781FhfBPCI9IoRl2tvOcfaDIsHDtIkDdATkM+o73j8LBfGpHihmm0euO5QxvRlhry5ZsO31p3/1vB1CiUfUdrO9oudaQsVkwhjqkMerHLiGyhaOS059lT4yt9EiabFJBAK9pRNv5Awk/s/NvZUIULWtM4rKvqyzwICxKGTipyZuaT61G1Yyl5PpaKo6HK/GOYWUbYDgAVT4REndieFa+f8ROKluvZ/6QyLEIgWj+tz3IJ9FVobpZIGk9OQA9LjDeCiYymRg8q0ZlXr8KmG8t1i3ur6yDrPHS6Pypy7xBDzzDSKiJhHWTjLrk4LhCsypg3JBRD4C7QAYqKgyxFA75wPF/nfEccHU7oSso20iHGsM3I9Z04yS3+Gxv2xttowVnzHwr0cViqXftipCu0EvunfG0O98YwU9X1fFu8st9t2Det1iDDrZLAkQJ1nTvpznGzdDyHjewAfvaZOzSNe/wMwlDcSBQUa91S5MHjO2QwOfe/9jGCbx/eFRKPudAtkNq9mQ+EvrqBfGn/B+Hib19yZwaaC+RDY3Bfm+u3pCAPxnp5KKFBSeZ7sLKXLzubkp6nslwoBAZAVHzcsEI/9oKZ1gBqQ3QxET1SeSsDjnJqyKSoQoMwkcyaII76wgkB/5yuQVezCObtjgxKB4f5rrcG5aW8Ow2Sy/r08fkWAwD+97pE5XWFeLVj7W8lSr0onSs0b8I53k0Bx/ghketE0AjYG8eEUViBBUEus/gRCBkls5D9Tq/we6oh4VR/JYZFnB+sQ7W0uqzvJ8pE62LYo7Jy8XvKS4dImtxjyT83aEXN0YXM1dwCA1t3cD+5ZQmfZe9cgnXh1jH2xSa+o3VnyC/5NP7V0ARyJaXe/fcaMpFzGFVI4NqmTOwZzTSMrmML8+mgmGoLYuackzc5M8BwDxD0BS01VVB6fE/VHDEFgSd89gyNoYOfqsEck0sTw9DOS/oWDbG6B3pJnyQqcjaa/9l+8HZ2LcZOj6Hx7rhLCVNS7XibrL/k7uhmlKyWV3LsdNJEtLqELpqInEfXn+t6jeKehaPVM5zFf7Vls05RuG3ep62JJPF6S+1u6pVJIsfN6iOd4WGg//2fsy0VMeWjzlL5sM1uqk6c4ihkGKEvMUklgXNST15ZjctMnmKaFgLsN+nH3oXebhPCp4x/n23YxX2a0tn9iDy1olR2/l8qS5OVGXxKgo+g=