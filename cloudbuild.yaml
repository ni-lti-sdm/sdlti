steps:  
# Building image
# Note: You need a shell to resolve environment variables with $$
- name: 'gcr.io/cloud-builders/docker'
  entrypoint: 'bash'
  args: [ 
          '-c',
          'docker build -f Dockerfile --build-arg SSH_KEY=$$SSH_KEY .' 
        ]
  secretEnv: ['SSH_KEY']

secrets:
- kmsKeyName: projects/data-warehouse-project-235018/locations/global/keyRings/lti-keyring/cryptoKeys/github-key
  secretEnv:
    SSH_KEY: 
      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