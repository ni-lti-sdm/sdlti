steps:  
# Building image
# Note: You need a shell to resolve environment variables with $$
- name: 'gcr.io/cloud-builders/docker'
  entrypoint: 'bash'
  args: [ 
          '-c',
          'docker build -f Dockerfile --build-arg SSH_KEY=$$SSH_KEY .'
        ]
  secretEnv: ['SSH_KEY']

secrets:
- kmsKeyName: projects/data-warehouse-project-235018/locations/global/keyRings/lti-secrets/cryptoKeys/msw-github-key
  secretEnv:
    SSH_KEY: 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